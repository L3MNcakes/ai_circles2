(this.webpackJsonpai_circles2=this.webpackJsonpai_circles2||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},127:function(e,t){},129:function(e,t){},139:function(e,t){},141:function(e,t){},168:function(e,t){},169:function(e,t){},174:function(e,t){},176:function(e,t){},183:function(e,t){},202:function(e,t){},219:function(e,t,n){"use strict";n.r(t);var a=n(5),i=n.n(a),o=n(116),c=n.n(o),r=(n(121),n(3)),s=(n(122),n(26)),u=n(1),d="test",l=function(e,t){switch(t.type){case d:return Object(u.a)(Object(u.a)({},e),{},{test:!0});default:return e}},p={test:!1},g="UPDATE_WORLD",f="UPDATE_AGENTS",O="UPDATE_FOOD",j=function(e,t){switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{world:Object(u.a)(Object(u.a)({},e.world),{},{width:t.payload.width,height:t.payload.height,tickInterval:t.payload.tickInterval})});case f:return Object(u.a)(Object(u.a)({},e),{},{agents:Object(u.a)(Object(u.a)({},e.agents),{},{initNum:t.payload.initNum,radius:t.payload.radius,minSpeed:t.payload.minSpeed,maxSpeed:t.payload.maxSpeed,minFoodForEgg:t.payload.minFoodForEgg,maxFoodForEgg:t.payload.maxFoodForEgg,minLifeSpan:t.payload.minLifeSpan,maxLifeSpan:t.payload.maxLifeSpan,mutationChance:t.payload.mutationChance})});case O:return Object(u.a)(Object(u.a)({},e),{},{food:Object(u.a)(Object(u.a)({},e.food),{},{initNum:t.payload.initNum,radius:t.payload.radius,spawnEvery:t.payload.spawnEvery,spawnAmount:t.payload.spawnAmount})});default:return e}},m={world:{width:800,height:600,tickInterval:.03,maxAgents:20,maxFood:40},agents:{initNum:5,radius:14,minSpeed:600,maxSpeed:1200,minFoodForEgg:15,maxFoodForEgg:30,minLifeSpan:12,maxLifeSpan:24,mutationChance:.07},food:{initNum:15,radius:10,spawnEvery:750,spawnAmount:10}},b=n(9),h={ADD_AGENT:"ADD_AGENT",ADD_EGG:"ADD_EGG",ADD_FOOD:"ADD_FOOD",EAT_FOOD:"EAT_FOOD",FERTILIZE_EGG:"FERTILIZE_EGG",LAZY_UPDATE_AGENTS:"LAZY_UPDATE_AGENTS",REMOVE_EGG:"REMOVE_EGG",REPLACE_AGENTS:"REPLACE_AGENTS",RESET:"RESET",SET_LEARNING:"LEARNING",TICK:"TICK",TOGGLE_RUNNING:"TOGGLE_RUNNING",UPDATE_AGENT:"UPDATE_AGENT",UPDATE_AGENTS:"UPDATE_AGENTS",UPDATE_FOOD:"UPDATE_FOOD"},E=function(e,t){switch(t.type){case h.ADD_AGENT:return Object(u.a)(Object(u.a)({},e),{},{agents:[].concat(Object(b.a)(e.agents),[t.payload])});case h.ADD_EGG:return Object(u.a)(Object(u.a)({},e),{},{eggs:[].concat(Object(b.a)(e.eggs),[t.payload])});case h.ADD_FOOD:return Object(u.a)(Object(u.a)({},e),{},{food:[].concat(Object(b.a)(e.food),[t.payload])});case h.EAT_FOOD:var n=e.food.indexOf(t.payload),a=[].concat(Object(b.a)(e.food.slice(0,n)),Object(b.a)(e.food.slice(n+1)));return Object(u.a)(Object(u.a)({},e),{},{food:a});case h.FERTILIZE_EGG:var i=t.payload,o=i.targetEgg,c=i.agent,r=e.eggs.indexOf(o);return-1!==r?Object(u.a)(Object(u.a)({},e),{},{eggs:[].concat(Object(b.a)(e.eggs.slice(0,r)),[Object(u.a)(Object(u.a)({},e.eggs[r]),{},{parents:[].concat(Object(b.a)(e.eggs[r].parents),[Object(u.a)({},c)])})],Object(b.a)(e.eggs.slice(r+1)))}):e;case h.LAZY_UPDATE_AGENTS:var s=e.agents.map((function(e){var n=t.payload.find((function(t){return t.id===e.id}));return n?Object(u.a)(Object(u.a)({},e),n):Object(u.a)({},e)}));return Object(u.a)(Object(u.a)({},e),{},{agents:s});case h.REMOVE_EGG:var d=e.eggs.indexOf(t.payload);return Object(u.a)(Object(u.a)({},e),{},{eggs:[].concat(Object(b.a)(e.eggs.slice(0,d)),Object(b.a)(e.eggs.slice(d+1)))});case h.REPLACE_AGENTS:return Object(u.a)(Object(u.a)({},e),{},{agents:t.payload,replaced:!0});case h.RESET:return Object(u.a)({},y);case h.SET_LEARNING:return Object(u.a)(Object(u.a)({},e),{},{isLearning:t.payload});case h.TICK:return Object(u.a)(Object(u.a)({},e),{},{tick:e.tick+1});case h.TOGGLE_RUNNING:return Object(u.a)(Object(u.a)({},e),{},{isRunning:t.payload?t.payload:!e.isRunning});case h.UPDATE_AGENT:var l=e.agents.findIndex((function(e){return e.id===t.payload.id}));return-1!==l?Object(u.a)(Object(u.a)({},e),{},{agents:[].concat(Object(b.a)(e.agents.slice(0,l)),[t.payload],Object(b.a)(e.agents.slice(l+1)))}):e;case h.UPDATE_AGENTS:var p=t.payload.map((function(e){return e.id})),g=e.agents.filter((function(e){return!p.includes(e.id)})),f=[].concat(Object(b.a)(g),Object(b.a)(t.payload)).map((function(t){var n=e.agents.find((function(e){return e.id===t.id}));return n?Object(u.a)(Object(u.a)({},t),{},{ticksAlive:n.ticksAlive}):null})).filter(Boolean);return Object(u.a)(Object(u.a)({},e),{},{agents:f});case h.UPDATE_FOOD:return Object(u.a)(Object(u.a)({},e),{},{food:t.payload});default:return e}},y={agents:[],eggs:[],food:[],tick:0,isRunning:!1,isLearning:!1},A=n(15),v=n(14),x=new A.a(A.a.browserCrypto),N=function(e,t){return new v(x.integer(50,e-50),x.integer(50,t-50))},T=function(e,t,n){var a=x.real(e,t),i=Math.pow(10,n);return Math.round(a*i)/i},S={FIND_FOOD:"FIND_FOOD",EAT_FOOD:"EAT_FOOD",WAIT:"WAIT",THINKING:"THINKING",PROCESSING_THOUGHTS:"PROCESSING_THOUGHTS",LAY_EGG:"LAY_EGG",FERTILIZE_EGG:"FERTILIZE_EGG",WANDER:"WANDER"},w=new A.a(A.a.browserCrypto),F=function(e){var t=s.Model.FromNetwork(e,{epochs:1,stepsPerEpoch:16});return t.compile({loss:"meanSquaredError",optimizer:"sgd"}),t},D=function(e){return e.addTeacher({lessonsQuantity:1e4,lessonLength:100,lessonsWithRandom:0,epsilon:1,epsilonDecay:.995,epsilonMin:.05,gamma:.9})},I=function(e,t){var n=D(e),a=function(e,t){var n={model:F(t),agentConfig:{memorySize:500,batchSize:32,temporalWindow:1}};return e.addAgent(n)}(e,t);return e.assignTeacherToAgent(a,n),[n,a]},G=function(e,t,n){var a,i=Object(r.a)(e,2)[1],o=t.agents.get(i),c=function(e,t){var n=new s.Model({name:w.uuid4(),layers:Object(b.a)(t.layers)},{epochs:1,stepsPerEpoch:16});n.compile({loss:"meanSquaredError",optimizer:"sgd"}),n.model.setWeights(t.model.getWeights());var a={model:n,agentConfig:{memorySize:500,batchSize:128,temporalWindow:1}};return e.addAgent(a)}(t,o.model.model);return t.teachers.forEach((function(e,t){a||0===e.agents.size&&(e.currentLessonLength=e.currentLessonLength<25?0:e.currentLessonLength-25,a=t)})),a=a||D(t),t.assignTeacherToAgent(c,a),[a,c]},_=function(e){switch(e){case S.FIND_FOOD:return 0;case S.EAT_FOOD:return 1;case S.WAIT:return 2;case S.THINKING:return 4;case S.LAY_EGG:return 5;case S.FERTILIZE_EGG:return 6;default:return-1}},L=n(33),R=n(34),C="READY",k="PROCESSING",P="ERROR",M=function(){function e(t){Object(L.a)(this,e),this.academy=t,this.agentQueue=new Set,this.state=C,this.IsAcademyLearning=!1}return Object(R.a)(e,[{key:"queueAgent",value:function(e){this.agentQueue.add(e)}},{key:"isAcademyLearning",value:function(){var e=!1;return this.academy.teachers.forEach((function(t){t.State>0&&(e=!0)})),this.IsAcademyLearning=e,e}},{key:"process",value:function(e,t,n,a){var i=this;if(this.state===C){var o=this.agentQueue.values().next().value,c=e.agents.find((function(e){return e.id===o}));if(!c)return void this.agentQueue.delete(o);if("THINKING"!==c.attemptedAction.type&&console.log("processing for agent who is: ",c.attemptedAction.type),this.isAcademyLearning())return;this.state=k;var s=Object(r.a)(c.brain,2),u=s[0],d=s[1],l=function(e,t){for(var n=t.world.maxAgents,a=t.world.maxFood,i=[],o=[],c=[],r=[],s=0;s<n;s++){var u=e.agents[s];u?(i.push(u.position.x),i.push(u.position.y),o.push(_(u.attemptedAction.type)),u.attemptedAction.targetPosition?(c.push(u.attemptedAction.targetPosition.x),c.push(u.attemptedAction.targetPosition.y)):(c.push(null),c.push(null)),r.push(u.speed)):(i.push(null),i.push(null),o.push(null),c.push(null),c.push(null),r.push(null))}for(var d=[],l=0;l<a;l++)e.food[l]?(d.push(e.food[l].position.x),d.push(e.food[l].position.y)):(d.push(null),d.push(null));return[].concat(i,o,c,r,d)}(e,t);this.academy.step({teacherName:u,agentsInput:l}).then((function(a){var r,s=a.get(d);s===t.world.maxFood?(i.academy.addRewardToAgent(d,.1),r=!0):e.food[s]&&!e.food[s].isEaten?(i.academy.addRewardToAgent(d,.75),r=!0):(i.academy.addRewardToAgent(d,-.75),r=!1),n(c,s,r),i.agentQueue.delete(o),i.state=C})).catch((function(e){console.error(e),a(e),i.state=P}))}}}]),e}(),W=n(0),U=Object(a.createContext)(),Z=function(e){var t=e.children,n=Object(a.useReducer)(j,m),i=Object(r.a)(n,2),o=i[0],c=i[1],u=Object(a.useState)(new s.Academy),d=Object(r.a)(u,1)[0],g=Object(a.useState)(function(e,t){var n=t,a=2*(2*e+e+2*e+e+2*t)+n,i=new s.NeuralNetwork;return i.InputShape=[a],i.addNeuralNetworkLayers([{type:"dense",units:32,activation:"relu"},{type:"dense",units:n,activation:"softmax"}]),i}(o.world.maxAgents,o.world.maxFood)),f=Object(r.a)(g,1)[0],O=Object(a.useState)(new M(d)),b=Object(r.a)(O,1)[0],h={appReducer:Object(a.useReducer)(l,p),configReducer:[o,c],worldReducer:Object(a.useReducer)(E,y),neuralAcademy:d,neuralNetwork:f,academyQueue:b};return Object(W.jsx)(U.Provider,{value:h,children:t})},Y=function(){return Object(a.useContext)(U)},H=function(e){var t=e.agent;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("circle",{onClick:function(e){e.preventDefault(),console.log(t)},style:{opacity:.7},cx:t.position.x,cy:t.position.y,r:t.radius,fill:t.color,stroke:t.isMutant?"#3F3":"#333",strokeWidth:t.attemptedAction.type===S.WANDER?"3px":"1px"}),Object(W.jsx)("text",{x:t.position.x,y:t.position.y,children:t.numEaten}),Object(W.jsx)("text",{x:t.position.x,y:t.position.y+15,children:t.generation})]})},K=function(e){var t=e.food;return Object(W.jsx)("polygon",{style:{fill:"#FFF",stroke:"#000"},points:function(){for(var e=t.position,n=t.radius,a=[],i=0;i<6;i++)a.push([e.x+n*Math.cos(2*Math.PI*i/6),e.y+n*Math.sin(2*Math.PI*i/6)]);return a.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(n,",").concat(a)})).reduce((function(e,t){return"".concat(e," ").concat(t)}))}()})},Q=function(e){var t=e.egg,n={fill:t.color,stroke:2===t.parents.length?"#F00":"#000"};return Object(W.jsx)("polygon",{style:n,points:function(){for(var e=t.position,n=t.radius,a=void 0===n?5:n,i=[],o=0;o<4;o++)i.push([e.x+a*Math.cos(2*Math.PI*o/4),e.y+a*Math.sin(2*Math.PI*o/4)]);return i.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(n,",").concat(a)})).reduce((function(e,t){return"".concat(e," ").concat(t)}))}()})},z=function(){var e=Y(),t=Object(r.a)(e.configReducer,1)[0],n=Object(r.a)(e.worldReducer,1)[0];return Object(W.jsx)("div",{style:{width:"100%"},children:Object(W.jsxs)("svg",{width:t.world.width,height:t.world.height,style:{backgroundColor:"#DDD"},children:[n.food.map((function(e,t){return Object(W.jsx)(K,{food:e},"f-".concat(t))})),n.eggs.map((function(e,t){return Object(W.jsx)(Q,{egg:e},"e-".concat(t))})),n.agents.map((function(e,t){return Object(W.jsx)(H,{agent:e},"a-".concat(t))}))]})})},B=new A.a(A.a.browserCrypto),q=function(e,t,n,a){var i=function(e,t,n){return{id:x.uuid4(),position:N(e.world.width,e.world.height),color:"#".concat(x.hex(6)),radius:e.agents.radius,speed:x.integer(e.agents.minSpeed,e.agents.maxSpeed)/1e3,attemptedAction:{type:S.WAIT},brain:I(t,n),numEaten:0,hasLaidEgg:!1,ticksAlive:0,foodForEgg:x.integer(e.agents.minFoodForEgg,e.agents.maxFoodForEgg),lifeSpan:T(e.agents.minLifeSpan,e.agents.maxLifeSpan,4),isMutant:!1,generation:0}}(e,t,n);a({type:h.ADD_AGENT,payload:i})},V=function(e,t){var n=function(e,t,n){return{id:B.uuid4(),position:(a=e,i=t,new v(B.integer(50,a-50),B.integer(50,i-50))),radius:n,isEaten:!1};var a,i}(e.world.width,e.world.height,e.food.radius);t({type:h.ADD_FOOD,payload:n})},J=function(e,t){var n,a=(n=e,{id:x.uuid4(),position:n.position.clone(),color:n.color,parents:[Object(u.a)({},n)]});return t({type:h.ADD_EGG,payload:a}),{id:e.id,hasLaidEgg:!0,attemptedAction:{type:S.WAIT}}},X=function(e,t,n,a,i){e.eggs.filter((function(e){return 2===e.parents.length})).forEach((function(o){if(e.agents.length<t.world.maxAgents){var c=function(e,t,n,a){var i=Object(r.a)(e.parents,2),o=i[0],c=i[1],s=1,u=x.bool()?o.color:c.color,d=x.bool(Math.pow(t.agents.mutationChance,s)),l=d?"#".concat(x.hex(6)):u;d&&(s+=1,console.log("color mutated"));var p=x.bool()?o.speed:c.speed,g=x.bool(Math.pow(t.agents.mutationChance,s)),f=g?x.integer(t.agents.minSpeed,t.agents.maxSpeed)/1e3:p;g&&(s+=1,console.log("speed mutated"));var O=x.bool()?o.foodForEgg:c.foodForEgg,j=x.bool(Math.pow(t.agents.mutationChance,s)),m=j?x.integer(t.agents.minFoodForEgg,t.agents.maxFoodForEgg):O;j&&(s+=1,console.log("foodForEgg mutated"));var b=x.bool()?o.lifeSpan:c.lifeSpan,h=x.bool(Math.pow(t.agents.mutationChance,s)),E=h?T(t.agents.minLifeSpan,t.agents.maxLifeSpan,4):b;h&&(s+=1,console.log("lifespan mutated"));var y=d||g||j||h,A=Math.max(o.generation,c.generation)+1;return{id:x.uuid4(),position:e.position.clone(),color:l,radius:t.agents.radius,speed:f,attemptedAction:{type:S.WAIT},brain:G(x.bool()?o.brain:c.brain,n,a),numEaten:0,hasLaidEgg:!1,ticksAlive:0,foodForEgg:m,lifeSpan:E,isMutant:y,generation:A}}(o,t,n,a);i({type:h.ADD_AGENT,payload:c})}i({type:h.REMOVE_EGG,payload:o})}))},$=function(e,t,n,a,i){var o=e.agents.map((function(o){switch(o.attemptedAction.type){case S.THINKING:return a.queueAgent(o.id),null;case S.FIND_FOOD:return function(e,t,n){var a=t.food.find((function(t){return t.id===e.attemptedAction.target}));if(!a||a.isEaten){var i=Object(r.a)(e.brain,2)[1];return n.addRewardToAgent(i,-1),{id:e.id,attemptedAction:{type:S.WAIT}}}if(a.position.distance(e.position)<=e.speed)return{id:e.id,position:a.position.clone(),numEaten:e.numEaten+1,attemptedAction:{type:S.EAT_FOOD,target:a.id,targetPosition:a.position}};var o=a.position.clone().subtract(e.position.clone()).angle(),c=new v(e.position.x+e.speed*Math.cos(o),e.position.y+e.speed*Math.sin(o));return{id:e.id,position:c}}(o,e,n);case S.EAT_FOOD:return function(e,t,n,a){var i=t.food.find((function(t){return t.id===e.attemptedAction.target}));if(i&&!i.isEaten){var o=Object(r.a)(e.brain,2)[1];n.addRewardToAgent(o,1),a({type:h.EAT_FOOD,payload:i})}return{id:e.id,hasLaidEgg:!1,attemptedAction:{type:S.WAIT}}}(o,e,n,i);case S.LAY_EGG:return J(o,i);case S.FERTILIZE_EGG:return function(e,t,n){var a=t.eggs.find((function(t){return t.id===e.attemptedAction.target}));if(!a||2===a.parents.length)return{id:e.id,attemptedAction:{type:S.WAIT}};if(a.position.distance(e.position)<=e.speed)return n({type:h.FERTILIZE_EGG,payload:{targetEgg:a,agent:e}}),{id:e.id,position:a.position.clone(),hasLaidEgg:!0,attemptedAction:{type:S.WAIT}};var i=a.position.clone().subtract(e.position.clone()).angle(),o=new v(e.position.x+e.speed*Math.cos(i),e.position.y+e.speed*Math.sin(i));return{id:e.id,position:o}}(o,e,i);case S.WAIT:return function(e,t,n){if(0!==e.numEaten&&e.numEaten%e.foodForEgg===0&&!e.hasLaidEgg){var a=t.eggs.filter((function(t){return 1===t.parents.length&&t.parents[0].id!==e.id}));return a.length>0?{id:e.id,attemptedAction:{type:S.FERTILIZE_EGG,target:a[0].id}}:{id:e.id,attemptedAction:{type:S.LAY_EGG}}}return t.food.length>0?{id:e.id,attemptedAction:{type:S.THINKING}}:{id:e.id,attemptedAction:{type:S.WANDER,targetPosition:N(n.world.width,n.world.height)}}}(o,e,t);case S.WANDER:return function(e){var t=e.attemptedAction.targetPosition.clone();if(t.distance(e.position)<=e.speed)return{id:e.id,position:t,attemptedAction:{type:S.WAIT}};var n=t.clone().subtract(e.position.clone()).angle(),a=new v(e.position.x+e.speed*Math.cos(n),e.position.y+e.speed*Math.sin(n));return{id:e.id,position:a}}(o);default:return null}})).filter(Boolean);i({type:h.LAZY_UPDATE_AGENTS,payload:o})},ee=function(e,t,n,a,i,o){!function(e,t,n,a){var i=e.agents.map((function(e){var t=e.ticksAlive+1;if(t>1e3*e.lifeSpan){var a=Object(r.a)(e.brain,2),i=a[0],o=a[1],c=n.teachers.get(i),s=n.agents.get(o);return c.removeStudent(s),!1}return Object(u.a)(Object(u.a)({},e),{},{ticksAlive:t})})).filter(Boolean);a({type:h.REPLACE_AGENTS,payload:i})}(e,0,n,o),$(e,t,n,i,o),function(e,t,n,a){n.process(e,t,(function(n,i,o){if(o){var c=i===t.world.maxFood?{id:n.id,attemptedAction:{type:S.WANDER,targetPosition:N(t.world.width,t.world.height)}}:{id:n.id,attemptedAction:{type:S.FIND_FOOD,target:e.food[i].id,targetPosition:e.food[i].position.clone()}};a({type:h.LAZY_UPDATE_AGENTS,payload:[c]})}else a({type:S.LAZY_UPDATE_AGENTS,payload:[{id:n.id,attemptedAction:{type:h.WAIT}}]})}),(function(e){a({type:h.TOGGLE_RUNNING,payload:!1})}))}(e,t,i,o),function(e,t,n){if(e.tick%t.food.spawnEvery===0){var a=t.food.spawnAmount;a+e.food.length>t.world.maxFood&&(a=t.world.maxFood-e.food.length);for(var i=0;i<a;i++)V(t,n)}}(e,t,o),X(e,t,n,a,o)},te=function(){var e=Y(),t=e.neuralAcademy,n=e.neuralNetwork,i=Object(r.a)(e.configReducer,2),o=i[0],c=i[1],s=Object(r.a)(e.worldReducer,2),u=s[0],d=s[1],l=Object(a.useState)(o.world.width),p=Object(r.a)(l,2),j=p[0],m=p[1],b=Object(a.useState)(o.world.height),E=Object(r.a)(b,2),y=E[0],A=E[1],v=Object(a.useState)(o.world.tickInterval),x=Object(r.a)(v,2),N=x[0],T=x[1],S=Object(a.useState)(o.agents.initNum),w=Object(r.a)(S,2),F=w[0],D=w[1],I=Object(a.useState)(o.agents.radius),G=Object(r.a)(I,2),_=G[0],L=G[1],R=Object(a.useState)(o.agents.minSpeed),C=Object(r.a)(R,2),k=C[0],P=C[1],M=Object(a.useState)(o.agents.maxSpeed),U=Object(r.a)(M,2),Z=U[0],H=U[1],K=Object(a.useState)(o.agents.minFoodForEgg),Q=Object(r.a)(K,2),z=Q[0],B=Q[1],V=Object(a.useState)(o.agents.maxFoodForEgg),J=Object(r.a)(V,2),X=J[0],$=J[1],ee=Object(a.useState)(o.agents.minLifeSpan),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],ie=Object(a.useState)(o.agents.maxLifeSpan),oe=Object(r.a)(ie,2),ce=oe[0],re=oe[1],se=Object(a.useState)(o.agents.mutationChance),ue=Object(r.a)(se,2),de=ue[0],le=ue[1],pe=Object(a.useState)(o.food.initNum),ge=Object(r.a)(pe,2),fe=ge[0],Oe=ge[1],je=Object(a.useState)(o.food.radius),me=Object(r.a)(je,2),be=me[0],he=me[1],Ee=Object(a.useState)(o.food.spawnEvery),ye=Object(r.a)(Ee,2),Ae=ye[0],ve=ye[1],xe=Object(a.useState)(o.food.spawnAmount),Ne=Object(r.a)(xe,2),Te=Ne[0],Se=Ne[1],we={width:"900px"},Fe={margin:"10px auto"};return Object(W.jsxs)("div",{className:"flex-container-column",style:{backgroundColor:"#DDD",padding:"5px"},children:[Object(W.jsxs)("div",{className:"flex-item flex-container-row",style:we,children:[Object(W.jsxs)("div",{className:"flex-item flex-container-column",children:[Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Width:",Object(W.jsx)("input",{type:"number",onChange:function(e){return m(e.target.value)},value:j})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Height:",Object(W.jsx)("input",{type:"number",onChange:function(e){return A(e.target.value)},value:y})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Tick Interval:",Object(W.jsx)("input",{type:"number",onChange:function(e){return T(e.target.value)},value:N})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Min Food For Egg:",Object(W.jsx)("input",{type:"number",onChange:function(e){return B(e.target.value)},value:z})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Max Food For Egg:",Object(W.jsx)("input",{type:"number",onChange:function(e){return $(e.target.value)},value:X})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Min Agent Lifespan:",Object(W.jsx)("input",{type:"number",onChange:function(e){return ae(e.target.value)},value:ne})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Max Agent Lifespan:",Object(W.jsx)("input",{type:"number",onChange:function(e){return re(e.target.value)},value:ce})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Agent Mutation Chance:",Object(W.jsx)("input",{type:"number",onChange:function(e){return le(e.target.value)},value:de})]})]}),Object(W.jsxs)("div",{className:"flex-item flex-container-column",children:[Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Starting Agents:",Object(W.jsx)("input",{type:"number",onChange:function(e){return D(e.target.value)},value:F})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Agent Radius:",Object(W.jsx)("input",{type:"number",onChange:function(e){return L(e.target.value)},value:_})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Agent Min Speed:",Object(W.jsx)("input",{type:"number",onChange:function(e){return P(e.target.value)},value:k})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Agent Max Speed:",Object(W.jsx)("input",{type:"number",onChange:function(e){return H(e.target.value)},value:Z})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Starting Food:",Object(W.jsx)("input",{type:"number",onChange:function(e){return Oe(e.target.value)},value:fe})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Food Radius:",Object(W.jsx)("input",{type:"number",onChange:function(e){return he(e.target.value)},value:be})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Food Spawns Every (ticks):",Object(W.jsx)("input",{type:"number",onChange:function(e){return ve(e.target.value)},value:Ae})]}),Object(W.jsxs)("div",{className:"flex-item",style:Fe,children:["Food Spawn Amount:",Object(W.jsx)("input",{type:"number",onChange:function(e){return Se(e.target.value)},value:Te})]})]})]}),Object(W.jsxs)("div",{className:"flex-item flex-container-row",style:we,children:[Object(W.jsx)("button",{className:"flex-item",onClick:function(e){e.preventDefault(),function(e,t,n,a){var i=a.configDispatch;(0,a.worldDispatch)({type:h.RESET}),i({type:g,payload:e}),i({type:f,payload:t}),i({type:O,payload:n})}({width:parseInt(j),height:parseInt(y),tickInterval:parseFloat(N,10)},{initNum:parseInt(F),radius:parseInt(_),minSpeed:parseInt(k),maxSpeed:parseInt(Z),minFoodForEgg:parseInt(z),maxFoodForEgg:parseInt(X),minLifeSpan:parseFloat(ne,10),maxLifeSpan:parseFloat(ce,10),mutationChance:parseFloat(de,10)},{initNum:parseInt(fe),radius:parseInt(be),spawnEvery:parseInt(Ae),spawnAmount:parseInt(Te)},{configDispatch:c,worldDispatch:d})},children:"NEW"}),Object(W.jsx)("button",{className:"flex-item",onClick:function(e){e.preventDefault(),d({type:h.TOGGLE_RUNNING})},children:u.isRunning?"PAUSE":"RESUME"}),Object(W.jsx)("button",{className:"flex-item",onClick:function(e){e.preventDefault(),d({type:h.TICK})},disabled:u.isRunning,children:"STEP NEXT"}),Object(W.jsx)("button",{className:"flex-item",onClick:function(e){e.preventDefault(),q(o,t,n,d)},children:"NEW BLOOD"})]})]})},ne=function(){var e=Y(),t=e.neuralAcademy,n=e.neuralTeacher,i=e.neuralNetwork,o=e.academyQueue,c=Object(r.a)(e.worldReducer,2),s=c[0],u=c[1],d=Object(r.a)(e.configReducer,1)[0],l=Object(a.useState)(null),p=Object(r.a)(l,2),g=p[0],f=p[1],O=Object(a.useState)(s.tick),j=Object(r.a)(O,2),m=j[0],b=j[1];return Object(a.useEffect)((function(){t.teachers.forEach((function(e){t.agents.forEach((function(t){e.removeStudent(t)}))})),t.agents.clear();for(var e=0;e<d.agents.initNum;e++)q(d,t,i,u);for(var n=0;n<d.food.initNum;n++)V(d,u)}),[u,d,t,i,n]),Object(a.useEffect)((function(){if(s.isRunning&&!g){var e=setInterval((function(){u({type:h.TICK})}),d.world.tickInterval);f(e)}else!s.isRunning&&g&&(clearInterval(g),f(null))}),[d.world.tickInterval,g,s.isRunning,u]),Object(a.useEffect)((function(){var e=!1;t.teachers.forEach((function(t){t.State>0&&(e=!0)})),s.tick>0&&m!==s.tick&&!e&&(ee(s,d,t,i,o,u),b(s.tick))}),[s,u,m,d,t,n,i,o]),Object(W.jsxs)("div",{className:"flex-container-column",children:[Object(W.jsx)("div",{className:"flex-item",children:Object(W.jsx)(z,{})}),Object(W.jsx)("div",{className:"flex-item",children:Object(W.jsx)(te,{})})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,220)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};c.a.render(Object(W.jsx)(i.a.StrictMode,{children:Object(W.jsx)(Z,{children:Object(W.jsx)(ne,{})})}),document.getElementById("root")),ae()}},[[219,1,2]]]);
//# sourceMappingURL=main.d03a65aa.chunk.js.map